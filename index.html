<!--
Copyright (C) 2018 by
  Robert L. Read <read.robert@gmail.com>
  David Jeschke <djeschke@gmail.com>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Mathathon 2018: Simplex Generators</title>
    <meta name="description" content="Mathathon 2018: Simplex Generators">
    <meta name="author" content="Robert L. Read">
    <link rel="stylesheet" href="./jquery-ui-1.11.4.custom/jquery-ui.min.css">
    <!--
    <link rel="stylesheet" href="./jquery-ui-1.12.4.custom/jquery-ui.structure.min.css">
    <link rel="stylesheet" href="./jquery-ui-1.12.4.custom/jquery-ui.theme.min.css">
    -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="icon" href="./images/favicon.ico">
    <script type="text/javascript" src="http://latex.codecogs.com/latexit.js"></script>

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="./js/scijs-newton-raphson.js"></script>
    <script src="./js/tm_bundle.js"></script>
    <script src="./js/axes.js"></script>
    <script src="./js/three.js"></script>
    <script src="./js/THREE.MeshLine.js"></script>
    <script src="./js/OrbitControls.js"></script>
    <script src="./js/Detector.js"></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="./js/d3-scale.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-array.v1.min.js"></script>
    <script src="https://d3js.org/d3-collection.v1.min.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-format.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-time.v1.min.js"></script>
    <script src="https://d3js.org/d3-time-format.v2.min.js"></script>
    <script src="https://d3js.org/d3-scale.v1.min.js"></script>
    <style>
  codenza, code {}     /*  noop mnemonic aide that codenza mimes code tag  */
  codenza {display:block;white-space:pre-wrap}
</style>
</head>
<script>
  var GLOBAL_DHELIX_PAGE = true;
  </script>
<body>
  <div id="threecontainer"></div>

 <h2>Control Mode</h2>
  <fieldset>
    <legend>Controls: </legend>
    <label for="radio-arb">Arbitrary Faces</label>
    <input type="radio" name="radio-1" id="radio-arb">
    <label for="radio-tet">Tetrahelix</label>
    <input type="radio" name="radio-1" id="radio-tet">
    <label for="radio-cub">Cube</label>
    <input type="radio" name="radio-1" id="radio-cub">
    <label for="radio-oct">Octahedron</label>
    <input type="radio" name="radio-1" id="radio-oct">
    <label for="radio-dod">Dodecahedron</label>
    <input type="radio" name="radio-1" id="radio-dod">
    <label for="radio-ico">Icosahedron</label>
    <input type="radio" name="radio-1" id="radio-ico">
  </fieldset>

  <fieldset>
    <legend>Tau: </legend>
    <label for="radio-t0">first</label>
    <input type="radio" name="radio-1" id="radio-t0">
    <label for="radio-t1">second</label>
    <input type="radio" name="radio-1" id="radio-t1">
    <label for="radio-t2">third</label>
    <input type="radio" name="radio-1" id="radio-t2">
    <label for="radio-t3">fourth</label>
    <input type="radio" name="radio-1" id="radio-t3">
    <label for="radio-t4">pentagon</label>
    <input type="radio" name="radio-1" id="radio-t4">
  </fieldset>

    <section>
<table style="width:100%">
  <tr>
    <th width='10%'>Coord</th>
    <th width='10%'>Value</th>
    <th width='60%'>Slider</th>
    <th width='20%'>Text Input</th>
  </tr>

  <tr>
    <td><label for="tau_d">Tau</label></td>
    <td> <input type="text" id="tau_d" readonly style="border:0; color:#f6931f; font-weight:bold;">
</td>
    <td> <div id="tau_slider"></div> </td>
    <td>  &nbsp;  &nbsp; <label>Tau (Twist) <input id="tau_txt" />  </label> </td>
  </tr>

  <tr>
    <td><label for="normal_b_x">B x</label></td>
    <td> <input type="text" id="normal_b_x" readonly style="border:0; color:#f6931f; font-weight:bold;">
</td>
    <td> <div id="normal_b_x_slider"></div> </td>
    <td>  &nbsp;  &nbsp; <label>B.x <input id="b_x" />  </label> </td>
  </tr>
  <tr>
    <td><label for="normal_b_y">B y</label></td>
    <td> <input type="text" id="normal_b_y" readonly style="border:0; color:#f6931f; font-weight:bold;">
</td>
    <td> <div id="normal_b_y_slider"></div> </td>
    <td>  &nbsp;  &nbsp; <label>B.y <input id="b_y" />  </label> </td>
  </tr>
  <tr>
    <td><label for="normal_b_z">B z</label></td>
    <td> <input type="text" id="normal_b_z" readonly style="border:0; color:#f6931f; font-weight:bold;">
</td>
    <td> <div id="normal_b_z_slider"></div> </td>
    <td>  &nbsp;  &nbsp; <label>B.z <input id="b_z" />  </label> </td>
  </tr>
  <tr></tr>
  <tr>
    <td><label for="normal_c_x">C x</label></td>
    <td> <input type="text" id="normal_c_x" readonly style="border:0; color:#f6931f; font-weight:bold;">
</td>
    <td> <div id="normal_c_x_slider"></div> </td>
    <td>  &nbsp;  &nbsp; <label>C.x <input id="c_x" />  </label> </td>
  </tr>
  <tr>
    <td><label for="normal_c_y">C y</label></td>
    <td> <input type="text" id="normal_c_y" readonly style="border:0; color:#f6931f; font-weight:bold;">
</td>
    <td> <div id="normal_c_y_slider"></div> </td>
    <td>  &nbsp;  &nbsp; <label>C.y <input id="c_y" />  </label> </td>
  </tr>
  <tr>
    <td><label for="normal_c_z">C z</label></td>
    <td> <input type="text" id="normal_c_z" readonly style="border:0; color:#f6931f; font-weight:bold;">
</td>
    <td> <div id="normal_c_z_slider"></div> </td>
    <td>  &nbsp;  &nbsp; <label>C.z <input id="c_z" />  </label> </td>
  </tr>
</table>


      </section>

    <table>
      <tr><td>
    <section>
      <p>
    <label for="radius_output">Radius (r):</label>
    <input type="text" id="radius_output" readonly style="border:0; color:#f6931f; font-weight:bold;">
    </p>
          <p>
    <label for="theta_output">Theta (<span lang='latex'>\theta</span>):</label>
    <input type="text" id="theta_output" readonly style="border:0; color:#f6931f; font-weight:bold;">
    </p>
          <p>
    <label for="travel_output">Travel (d):</label>
    <input type="text" id="travel_output" readonly style="border:0; color:#f6931f; font-weight:bold;">
    </p>
          <p>
    <label for="phi_output">Phi:</label>
      <input type="text" id="phi_output" readonly style="border:0; color:#f6931f; font-weight:bold;">
    </p>
    </section>
        </td>
        <td>
    <section>
 The nodes of the segmented helix are, for integers <i>n</i>:
      <div lang="latex">
y = r \cos{(n \theta)}
</div>
      <div lang="latex">
x =  r \sin{(n \theta)}
</div>
      <div lang="latex">
z = n \cdot d
</div>
    </section>
        </td>
        </tr>
</table>

    <section id="textsection">
        <h1 id="message_banner">Basic Usage -- Test Discrete Helix Math</h1>
        <h2> This is an interactive 3D simulation. To change the view, place your mouse in the view area, and
            hold and "drag" the mouse to rotate the image.
            The mouse wheel or a drag on your trackpad should zoom you in or out.</h2>
        <h2>Creating a Helix</h2>
        <p>This is a test page in order to a math principle that came out of the Mathathon
        where we publicly developed a a lot of "generators".

        <p> We observed that every regular generator created a helix (though sometimes a a degenerate helix.) In fact, we now know every repeated transformation involving a
          translation and a similar change in angle produces a discrete helix. As far as I have been able to find, this has been articulated only
          by Eric Lord in a <a href="https://www.researchgate.net/publication/226976531_Helical_Structures_The_Geometry_of_Protein_Helices_and_Nanotubes">paper from 2002</a>.
        </p>
<q>
  In nature, helical structures arise when identical structural subunits combine sequentially, the orientational and translational relation between each unit
  and its predecessor remaining constant.
</q>

        <p> The fundamental goal of this page is to be able to relate the intrinsic properties of the structural subunits and the rule for their placement
          to the radius, travel, and pitch of the resulting segmented helix. In the virtual world rendered above, the "structural subunit" is
          rendered as a prism with a triangular cross-section. The "rule" for the adjoining is face-to-face so that the normals of these faces
          are aligned in opposite directions through the centroid of the face of the prism. It is important to understand that the same math
          applies to molecules, which do not have flat faces, but where bonding forces constuct the relationship which generates the segmented helix.</p>
        <p>
          In the view above, the segmented helix which matches the joints is drawn as a thin green line. You will note that it always intersects
          the joints, verifying its correctness, although it is computed in a completely different way---as a helix.  The prism placement is NOT done this way---it is an iteration of laying the prisms face-to-face according to a fixed rule.
        </p>
        <p>
          The "radius" of a segmented helix is the distance from a segment joint to the axis. "Theta" is the rotation about the axis between the two joints on one segment. "Travel" is the distance along the axis between two joints. "Phi" is the angle that a segment makes with axis.
          </p>
        <p>
          Although a work-in-progress, at this repo you will find a <a href="https://github.com/PubInv/segmented-helixes/blob/master/doc/StackingHelix.pdf">technical paper</a> describing the math in greater detail, and giving the Mathematica code that implements it. (The same math is implemented in JavaScript on this page.)
          </p>

        <p> I have developed an algorithm---it is actually a closed-form expression, but too complex to be treated as such---which computes the intrinsic properties of the discrete helix from the intrinsic properties of a stacked object. This is closely related to an algorithm <a href="https://www.researchgate.net/profile/Peter_Kahn/publication/220667044_Defining_the_axis_of_a_helix/links/5b86ab1e299bf1d5a730ff2e/Defining-the-axis-of-a-helix.pdf">published</a> by Peter Kahn in 1989.
        </p>
        <p> I have extended Kahn's work by developing the math to apply his algorithm from the face-normals. The insight to do this is that the object can always be positioned in space so that the joints on either side are symmetrically arranged about an axis. </p>
        <p> This page is my attempt to demonstrate this mathematics, and turn it into
          a tool that can be used by anyone withough Mathematica.
        </p>

        <h1>An Interesting Idea</h1>

        <p>
        This interactive tool makes clear that it is possible to use a single object with oblique faces and to wildly vary the coiling by
        changing only the "twist" tau.
        </p>
        <p>
          This suggests that it may be possible to build an interesting tentacle that using only rotary servos at each joint.
          This would be very inexepensive to prototype on a small scale. Each segment would be a prism. The faces would be, for example,
          made out aluminum and lubricated with oil. The system would be controled only by N-1 servo positions. Obviously, lengthening
          and shortening the mast or tentacle would be easy by chaing all servos at the same time. However, it would also be easy
          to compute the Jacobian and use standard optimization techniques to position the tentacle in space.
        </p>
        <p>
          Although mechanically this is not likely to be as stong as a tetrahedron based tentacle, it would be much cheaper to build,
          which is a tremendous advantage.
          </p>



        <h2>Licensing</h2>

        <p>All of the code on this site is released under the GNU General Public License, and I hope you will
          reuse it. </p>
        <p>This project is part of Public Invention. To assist on this project, contact Robert L. Read &lt; read.robert@gmail.com &gt;</p>
    </section>
    <script src="./js/segment_helix_math.js"></script>
    <script src="./js/main.js"></script>

</body>
